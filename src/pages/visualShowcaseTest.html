<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار مكون Visual Showcase</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200..1000&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../components/visualShowcase/visualShowcase.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Cairo', sans-serif;
            background: #f5f5f5;
        }
        
        .test-container {
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .test-controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }
        
        .test-btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            background: #007bff;
            color: white;
            cursor: pointer;
            font-family: 'Cairo', sans-serif;
            font-weight: 500;
            transition: background 0.3s ease;
        }
        
        .test-btn:hover {
            background: #0056b3;
        }
        
        .test-btn.danger {
            background: #dc3545;
        }
        
        .test-btn.danger:hover {
            background: #c82333;
        }
        
        .visual-showcase {
            margin: 2rem 0;
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .status {
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0.5rem;
            text-align: center;
            font-weight: 500;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>اختبار مكون Visual Showcase</h1>
            <p>اختبار شامل لجميع وظائف المكون المستقل</p>
        </div>
        
        <div class="test-controls">
            <button class="test-btn" onclick="initComponent()">تهيئة المكون</button>
            <button class="test-btn" onclick="updateImages()">تحديث الصور</button>
            <button class="test-btn" onclick="toggleAnimations()">تبديل الحركات</button>
            <button class="test-btn danger" onclick="removeComponent()">إزالة المكون</button>
        </div>
        
        <div id="status" class="status info">
            جاهز للاختبار - اضغط على "تهيئة المكون" للبدء
        </div>
        
        <div class="visual-showcase" id="showcase-container">
            <!-- سيتم إدراج المكون هنا -->
        </div>
    </div>

    <script type="module">
        import { 
            initVisualShowcase, 
            removeVisualShowcase, 
            getVisualShowcaseInstance 
        } from '../components/visualShowcase/index.js';
        
        let currentInstance = null;
        let animationsEnabled = true;
        
        // تحديث حالة الاختبار
        function updateStatus(message, type = 'info') {
            const statusEl = document.getElementById('status');
            statusEl.textContent = message;
            statusEl.className = `status ${type}`;
        }
        
        // تهيئة المكون
        window.initComponent = function() {
            try {
                currentInstance = initVisualShowcase({
                    container: '#showcase-container',
                    images: [
                        'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=500&fit=crop',
                        'https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=400&h=500&fit=crop',
                        'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=400&h=500&fit=crop',
                        'https://images.unsplash.com/photo-1426604966848-d7adac402bff?w=400&h=500&fit=crop',
                        'https://images.unsplash.com/photo-1502780402662-acc01917949e?w=400&h=500&fit=crop',
                        'https://images.unsplash.com/photo-1518837695005-2083093ee35b?w=400&h=500&fit=crop'
                    ],
                    videoSrc: 'https://tympanus.net/Development/OnScrollLayoutAnimations/video/1.mp4',
                    enableScrollAnimations: animationsEnabled,
                    enableLayerAnimations: animationsEnabled,
                    enableCenterAnimation: animationsEnabled
                });
                
                if (currentInstance) {
                    updateStatus('تم تهيئة المكون بنجاح! جرب التمرير لرؤية الحركات', 'success');
                } else {
                    updateStatus('فشل في تهيئة المكون', 'error');
                }
            } catch (error) {
                console.error('خطأ في تهيئة المكون:', error);
                updateStatus(`خطأ: ${error.message}`, 'error');
            }
        };
        
        // تحديث الصور
        window.updateImages = function() {
            if (!currentInstance) {
                updateStatus('يجب تهيئة المكون أولاً', 'error');
                return;
            }
            
            try {
                currentInstance.updateConfig({
                    images: [
                        'https://images.unsplash.com/photo-1518837695005-2083093ee35b?w=400&h=500&fit=crop',
                        'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=400&h=500&fit=crop',
                        'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=500&fit=crop',
                        'https://images.unsplash.com/photo-1502780402662-acc01917949e?w=400&h=500&fit=crop',
                        'https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=400&h=500&fit=crop',
                        'https://images.unsplash.com/photo-1426604966848-d7adac402bff?w=400&h=500&fit=crop'
                    ]
                });
                updateStatus('تم تحديث الصور بنجاح!', 'success');
            } catch (error) {
                console.error('خطأ في تحديث الصور:', error);
                updateStatus(`خطأ في التحديث: ${error.message}`, 'error');
            }
        };
        
        // تبديل الحركات
        window.toggleAnimations = function() {
            if (!currentInstance) {
                updateStatus('يجب تهيئة المكون أولاً', 'error');
                return;
            }
            
            try {
                animationsEnabled = !animationsEnabled;
                currentInstance.updateConfig({
                    enableScrollAnimations: animationsEnabled,
                    enableLayerAnimations: animationsEnabled,
                    enableCenterAnimation: animationsEnabled
                });
                
                const status = animationsEnabled ? 'مفعلة' : 'معطلة';
                updateStatus(`الحركات الآن ${status}`, 'success');
            } catch (error) {
                console.error('خطأ في تبديل الحركات:', error);
                updateStatus(`خطأ: ${error.message}`, 'error');
            }
        };
        
        // إزالة المكون
        window.removeComponent = function() {
            try {
                removeVisualShowcase();
                currentInstance = null;
                updateStatus('تم إزالة المكون بنجاح', 'success');
            } catch (error) {
                console.error('خطأ في إزالة المكون:', error);
                updateStatus(`خطأ في الإزالة: ${error.message}`, 'error');
            }
        };
        
        // تهيئة تلقائية عند تحميل الصفحة
        document.addEventListener('DOMContentLoaded', () => {
            updateStatus('الصفحة جاهزة - اضغط على "تهيئة المكون" للبدء', 'info');
        });
    </script>
</body>
</html>